import{r as u,j as t}from"./index-b2ef79c2.js";import{n as q}from"./FileSaver.min-7cd7f937.js";import{g as G}from"./getZksTasks-46f7e881.js";import{F as b}from"./index-172dc63e.js";import{S as p,I as me,E as xe,a as ye}from"./index-fa1a6c2a.js";import{T as ke,a as we}from"./index-7b773b73.js";import{C as ge}from"./index-08b925e2.js";import{B as W,E as je}from"./EditOutlined-8b010ab0.js";import{L as Ce}from"./index-5e132e59.js";import{m as ee}from"./index-d3e2e81c.js";import{S as be}from"./SyncOutlined-620b68af.js";import"./useFlexGapSupport-2bb9cee6.js";import"./Sider-05241123.js";import"./axios-4a70c6fc.js";import"./row-431da211.js";import"./PlusOutlined-23b712b3.js";import"./index-d41603e6.js";const{Content:Se}=Ce;function Re(){u.useState(0),u.useState(0),u.useState(!1),u.useState({});const[m,S]=u.useState([]);u.useState(!1),u.useState(!1),b.useForm(),b.useForm();const[x,v]=u.useState([]);b.useForm(),u.useState(!1);const[E,y]=u.useState(!1),[re,F]=u.useState(!1),[k,z]=u.useState(new Map),[se,w]=u.useState([]),[te,ne]=u.useState(!1),[ae,oe]=u.useState(0),[g,ie]=u.useState(!1),P="0x2da10a1e27bf85cedd8ffb1abbe97e53391c0295",D="0x8B791913eB07C32779a16750e3868aA8495F5964",I="0xb9061E38FeE7d30134F56aEf7117E2F6d1580666",_="0xbE7D1FD1f6748bbDefC4fbaCafBb11C6Fc506d1d",A="0x6e2B76966cbD9cF4cC2Fa0D76d24d5241E0ABC2F",B="0x9606eC131EeC0F84c95D82c9a63959F2331cF2aC",L="0x5B91962F5ECa75E6558E4d32Df69B30f75cc6FE5",T="0xCBE2093030F485adAaf5b61deb4D9cA8ADEAE509",O="0xd999E16e68476bC749A28FC14a0c3b6d7073F50c",N="0xC5db68F30D21cBe0C9Eac7BE5eA83468d69297e6",K="0x04e9Db37d8EA0760072e1aCE3F2A219988Fdac29",M="0x1BbD33384869b30A323e15868Ce46013C82B86FB",J="0x1181D7BE04D80A8aE096641Ee1A87f7D557c6aeb",R="0x39e098a153ad69834a9dac32f0fca92066ad03f4",H="0x6C31035D62541ceba2Ac587ea09891d1645D6D07",Z="0x84d05333f1F5Bf1358c3f63A113B1953C427925D",$="0xA269031037B4D5fa3F771c401D19E57def6Cb491",Q="0x36A1aCbbCAfca2468b85011DDD16E7Cb4d673230",V="0x498f7bB59c61307De7dEA005877220e4406470e9",U="0xA269031037B4D5fa3F771c401D19E57def6Cb491",X="0x981F198286E40F9979274E0876636E9144B8FB8E",Y="0xf8b59f3c3Ab33200ec80a8A58b2aA5F5D2a8944C",le=()=>{ie(!g)},ce=()=>g?t.jsx(xe,{}):t.jsx(ye,{}),de=async()=>{try{const e=[...m],r=[];for(let n of e)r.push(()=>new Promise(a=>{const s=c(n.address,P);n.sync=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,D);n.mute=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,I);n.okx=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,_);n.spacefi=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,A);n._1inch=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,B);n.izumi=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,L);n.rollup=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,T);n.zns=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,O);n.velo=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,N),h=c(n.address,K);n.rf=s+h,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,M),h=c(n.address,J);n.eralend=s+h,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,R);n.mav=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,H);n.veSync=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,Z)+c(n.address,$);n.usdp=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,Q);n.ooe=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,V);n.ezk=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,U);n.odos=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,X);n.dmail=s,a()})),r.push(()=>new Promise(a=>{const s=c(n.address,Y);n.pancake=s,a()}));await Promise.all(r.map(n=>n())),w([...e]),localStorage.setItem("addresses",JSON.stringify(e))}catch(e){console.error(e)}finally{y(!1)}},ue=async()=>{if(!x.length){q.error({message:"错误",description:"请先选择要刷新的地址"},2);return}y(!0);try{const e=[...m],r=[];for(let n of x){const a=e.findIndex(s=>s.key===n);if(a!==-1){const s=e[a],h=new Map,l=(await G(s.address))[0];z(h),await new Promise(i=>{setTimeout(()=>{i()},200)}),r.push(()=>new Promise(i=>{const o=d(l,P);s.sync=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,D);s.mute=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,I);s.okx=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,_);s.spacefi=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,A);s._1inch=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,B);s.izumi=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,L);s.rollup=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,T);s.zns=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,O);s.velo=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,N),C=d(l,K);s.rf=o+C,i()})),r.push(()=>new Promise(i=>{const o=d(l,M),C=d(l,J);s.eralend=o+C,i()})),r.push(()=>new Promise(i=>{const o=d(l,R);s.mav=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,H);s.veSync=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,Z)+d(l,$);s.usdp=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,Q);s.ooe=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,V);s.ezk=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,U);s.odos=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,X);s.dmail=o,i()})),r.push(()=>new Promise(i=>{const o=d(l,Y);s.pancake=o,i()}))}}await Promise.all(r.map(n=>n())),w([...e]),localStorage.setItem("addresses",JSON.stringify(e)),ee.success("刷新成功")}catch(e){q.error({message:"错误",description:e.message},2)}finally{y(!1),v([])}},c=(e,r)=>{r=r.toLowerCase();const n=k.get(e);return n==null?(ee.info("等待数据加载完成再刷新"),"error"):n.reduce((s,h)=>h===r?s+1:s,0)},d=(e,r)=>(r=r.toLowerCase(),e.reduce((a,s)=>s===r?a+1:a,0));u.useEffect(()=>{const e=()=>{oe(window.innerHeight-180)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[]),u.useEffect(()=>{F(!0);const e=localStorage.getItem("addresses");e&&(S(JSON.parse(e)),w(JSON.parse(e))),(async()=>{const n=JSON.parse(e);if(!n)return;const a=new Map;let s=[];const h=[];for(const f of n){const l=f.address,i=G(l).then(o=>{a.set(l,o[0]),s.push(o[1])}).catch(o=>{console.error(`Error fetching tasks for address ${l}:`,o)});h.push(i)}try{await Promise.all(h),F(!1),z(a);const f=s.flat();localStorage.setItem("zks_timestamps",JSON.stringify(f))}catch(f){console.error("Error fetching task contracts:",f)}})()},[]),u.useEffect(()=>{!te&&m.length>0&&k.size>0&&(de(),ne(!0))},[m,k]);const pe={selectedRowKeys:x,onChange:e=>{v(e)}},[he,j]=u.useState(null),fe=[{title:"#",key:"index",align:"center",render:(e,r,n)=>n+1,width:34.5},{title:"备注",dataIndex:"name",key:"name",align:"center",render:(e,r)=>r.key===he?t.jsx(me,{placeholder:"请输入备注",defaultValue:e,onPressEnter:a=>{r.name=a.target.value,S([...m]),localStorage.setItem("addresses",JSON.stringify(m)),j(null)}}):t.jsxs(t.Fragment,{children:[t.jsx(we,{color:"blue",onClick:()=>j(r.key),children:e}),!e&&t.jsx(W,{shape:"circle",icon:t.jsx(je,{}),size:"small",onClick:()=>j(r.key)})]}),width:70},{title:t.jsxs("span",{children:["钱包地址",t.jsx("span",{onClick:le,style:{marginLeft:8,cursor:"pointer"},children:ce()})]}),dataIndex:"address",key:"address",align:"center",render:e=>g?"***":e,width:150},{title:"最后交易",dataIndex:"zks2_last_tx",key:"zks2_last_tx",align:"center",render:(e,r)=>{let n="inherit";return e===null?t.jsx(p,{}):(e.includes("周")?n="red":n="#1677ff",t.jsx("a",{href:"https://explorer.zksync.io/address/"+r.address,target:"_blank",style:{color:n},children:e}))},width:55},{title:t.jsxs("a",{href:"https://defillama.com/chain/zkSync Era",style:{color:"white"},target:"_blank",rel:"noopener noreferrer",children:["zkSyncEra Task List  [参考defillama TVL数据] ",t.jsx("br",{}),"🔴请注意，通过点击任务列表的超链接，您将离开本网页。我们建议您在访问这些外部链接之前，仔细阅读其网站的隐私政策和使用条款。我们不能控制这些网站的内容和安全性，并且不对其造成的任何损失或损害负责。 在访问外部链接时，您需要自行评估潜在的风险。这些链接不构成对所链接网站内容的认可或支持。我们不对这些外部链接的准确性、内容、服务质量或安全性做任何承诺。 我们建议您保持您的计算机和设备的安全性，使用防病毒软件和防火墙，并时刻注意潜在的网络钓鱼或恶意软件攻击。 通过继续使用本网页并访问其中的超链接，您同意承担访问外部链接可能带来的一切风险。我们不对由此导致的任何损失或损害负责！"]}),key:"zks_era_group",className:"zks_era",children:[{title:t.jsx("a",{href:"https://syncswap.xyz",target:"_blank",rel:"noopener noreferrer",children:"Sync"}),dataIndex:"sync",key:"sync",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.sync===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://app.mute.io/swap",target:"_blank",rel:"noopener noreferrer",children:"Mute"}),dataIndex:"mute",key:"mute",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.mute===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://www.okx.com/cn/web3/dex",target:"_blank",rel:"noopener noreferrer",children:"OKX"}),dataIndex:"okx",key:"okx",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.okx===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://swap-zksync.spacefi.io/#/swap",target:"_blank",rel:"noopener noreferrer",children:"Spacefi"}),dataIndex:"spacefi",key:"spacefi",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.spacefi===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://app.1inch.io",target:"_blank",rel:"noopener noreferrer",children:"1inch"}),dataIndex:"_1inch",key:"_1inch",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r._1inch===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://izumi.finance/trade/swap",target:"_blank",rel:"noopener noreferrer",children:"izumi"}),dataIndex:"izumi",key:"izumi",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.izumi===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://app.vesync.finance/swap",target:"_blank",rel:"noopener noreferrer",children:"veSync"}),dataIndex:"veSync",key:"veSync",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.veSync===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://app.mav.xyz/?chain=324",target:"_blank",rel:"noopener noreferrer",children:"Mav"}),dataIndex:"mav",key:"mav",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.mav===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://zks.network/",target:"_blank",rel:"noopener noreferrer",children:"zns"}),dataIndex:"zns",key:"zns",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.zns===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://app.velocore.xyz/swap",target:"_blank",rel:"noopener noreferrer",children:"velo"}),dataIndex:"velo",key:"velo",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.velo===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://app.reactorfusion.xyz/",target:"_blank",rel:"noopener noreferrer",children:"Reactor"}),dataIndex:"rf",key:"rf",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.rf===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://app.openocean.finance/CLASSIC#/ZKSYNC/ETH/USDC",target:"_blank",rel:"noopener noreferrer",children:"OOE"}),dataIndex:"ooe",key:"ooe",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.ooe===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://dapp.ezkalibur.com/",target:"_blank",rel:"noopener noreferrer",children:"eZK"}),dataIndex:"ezk",key:"ezk",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.ezk===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://app.odos.xyz/",target:"_blank",rel:"noopener noreferrer",children:"odos"}),dataIndex:"odos",key:"odos",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.odos===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://mail.dmail.ai/presale/395788",target:"_blank",rel:"noopener noreferrer",children:"dmail"}),dataIndex:"dmail",key:"dmail",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.dmail===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:t.jsx("a",{href:"https://pancakeswap.finance/swap?chain=zkSync",target:"_blank",rel:"noopener noreferrer",children:"cake"}),dataIndex:"pancake",key:"pancake",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.pancake===e,render:(e,r)=>t.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?t.jsx(p,{}):e}),width:55},{title:"进度",dataIndex:"progress",key:"progress",align:"center",sorter:(e,r)=>e.progress-r.progress,render:(e,r)=>{const n=["sync","mute","okx","spacefi","_1inch","izumi","zns","velo","rf","mav","veSync","ooe","ezk","odos","dmail","pancake"],s=n.reduce((f,l)=>r[l]>0?f+1:f,0)/n.length*100;r.progress=s;const h=`rgba(240, 121, 78, ${s/100})`;return{children:t.jsx("span",{children:e===null?t.jsx(p,{}):`${s.toFixed(2)}%`}),props:{style:{background:h}}}},width:60}]}];return t.jsx("div",{children:t.jsx(Se,{children:t.jsx(p,{spinning:re,children:t.jsx(ke,{rowSelection:pe,dataSource:se,pagination:!1,bordered:!0,style:{marginBottom:"0px",zIndex:2},size:"small",columns:fe,scroll:{y:ae},footer:()=>t.jsx(ge,{children:t.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",gap:"10px"},children:t.jsx(W,{type:"primary",onClick:ue,loading:E,size:"large",style:{width:"20%"},icon:t.jsx(be,{}),children:E?"正在刷新":"刷新选中地址"})})})})})})})}export{Re as default};
